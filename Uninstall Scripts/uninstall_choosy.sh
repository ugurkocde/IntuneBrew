#!/bin/bash
# Uninstall script for Choosy
# Generated by IntuneBrew

# Exit on error
set -e

echo "Uninstalling Choosy..."

# Check if running as root
if [ "$EUID" -ne 0 ]; then
  echo "Please run as root"
  exit 1
fi

# Kill application process if running
echo "Stopping Choosy if running..."
pkill -f "Choosy" 2>/dev/null || true

# Kill application with bundle ID com.choosyosx.Choosy if running
echo "Stopping application with bundle ID com.choosyosx.Choosy if running..."
killall -9 "com.choosyosx.Choosy" 2>/dev/null || true

# Remove $HOME/Library/Application Scripts/*.com.choosyosx.Choosy
echo "Removing $HOME/Library/Application Scripts/*.com.choosyosx.Choosy..."
if [ -d "$HOME/Library/Application Scripts/*.com.choosyosx.Choosy" ]; then
    rm -rf "$HOME/Library/Application Scripts/*.com.choosyosx.Choosy" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Scripts/*.com.choosyosx.Choosy" ]; then
    rm -f "$HOME/Library/Application Scripts/*.com.choosyosx.Choosy" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Scripts/com.choosyosx.Choosy.Safari
echo "Removing $HOME/Library/Application Scripts/com.choosyosx.Choosy.Safari..."
if [ -d "$HOME/Library/Application Scripts/com.choosyosx.Choosy.Safari" ]; then
    rm -rf "$HOME/Library/Application Scripts/com.choosyosx.Choosy.Safari" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Scripts/com.choosyosx.Choosy.Safari" ]; then
    rm -f "$HOME/Library/Application Scripts/com.choosyosx.Choosy.Safari" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Scripts/com.choosyosx.Choosy.Share
echo "Removing $HOME/Library/Application Scripts/com.choosyosx.Choosy.Share..."
if [ -d "$HOME/Library/Application Scripts/com.choosyosx.Choosy.Share" ]; then
    rm -rf "$HOME/Library/Application Scripts/com.choosyosx.Choosy.Share" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Scripts/com.choosyosx.Choosy.Share" ]; then
    rm -f "$HOME/Library/Application Scripts/com.choosyosx.Choosy.Share" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/BraveSoftware/Brave-Browser-Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/BraveSoftware/Brave-Browser-Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/BraveSoftware/Brave-Browser-Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/BraveSoftware/Brave-Browser-Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/BraveSoftware/Brave-Browser-Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/BraveSoftware/Brave-Browser-Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/BraveSoftware/Brave-Browser-Nightly/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/BraveSoftware/Brave-Browser-Nightly/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/BraveSoftware/Brave-Browser-Nightly/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/BraveSoftware/Brave-Browser-Nightly/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/BraveSoftware/Brave-Browser-Nightly/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/BraveSoftware/Brave-Browser-Nightly/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/BraveSoftware/Brave-Browser/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/BraveSoftware/Brave-Browser/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/BraveSoftware/Brave-Browser/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/BraveSoftware/Brave-Browser/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/BraveSoftware/Brave-Browser/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/BraveSoftware/Brave-Browser/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/Choosy
echo "Removing $HOME/Library/Application Support/Choosy..."
if [ -d "$HOME/Library/Application Support/Choosy" ]; then
    rm -rf "$HOME/Library/Application Support/Choosy" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/Choosy" ]; then
    rm -f "$HOME/Library/Application Support/Choosy" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/com.operasoftware.Opera/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/com.operasoftware.Opera/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/com.operasoftware.Opera/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/com.operasoftware.Opera/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/com.operasoftware.Opera/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/com.operasoftware.Opera/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/com.operasoftware.OperaDeveloper/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/com.operasoftware.OperaDeveloper/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/com.operasoftware.OperaDeveloper/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/com.operasoftware.OperaDeveloper/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/com.operasoftware.OperaDeveloper/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/com.operasoftware.OperaDeveloper/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/com.operasoftware.OperaNext/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/com.operasoftware.OperaNext/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/com.operasoftware.OperaNext/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/com.operasoftware.OperaNext/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/com.operasoftware.OperaNext/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/com.operasoftware.OperaNext/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/Google/Chrome Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/Google/Chrome Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/Google/Chrome Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/Google/Chrome Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/Google/Chrome Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/Google/Chrome Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/Google/Chrome Canary/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/Google/Chrome Canary/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/Google/Chrome Canary/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/Google/Chrome Canary/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/Google/Chrome Canary/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/Google/Chrome Canary/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/Google/Chrome Dev/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/Google/Chrome Dev/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/Google/Chrome Dev/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/Google/Chrome Dev/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/Google/Chrome Dev/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/Google/Chrome Dev/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/Google/Chrome/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/Google/Chrome/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/Google/Chrome/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/Google/Chrome/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/Google/Chrome/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/Google/Chrome/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/Microsoft Edge Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/Microsoft Edge Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/Microsoft Edge Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/Microsoft Edge Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/Microsoft Edge Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/Microsoft Edge Beta/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/Microsoft Edge Canary/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/Microsoft Edge Canary/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/Microsoft Edge Canary/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/Microsoft Edge Canary/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/Microsoft Edge Canary/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/Microsoft Edge Canary/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/Microsoft Edge Dev/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/Microsoft Edge Dev/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/Microsoft Edge Dev/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/Microsoft Edge Dev/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/Microsoft Edge Dev/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/Microsoft Edge Dev/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/Microsoft Edge/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/Microsoft Edge/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/Microsoft Edge/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/Microsoft Edge/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/Microsoft Edge/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/Microsoft Edge/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/Mozilla/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/Mozilla/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/Mozilla/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/Mozilla/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/Mozilla/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/Mozilla/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/Vivaldi Snapshot/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/Vivaldi Snapshot/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/Vivaldi Snapshot/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/Vivaldi Snapshot/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/Vivaldi Snapshot/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/Vivaldi Snapshot/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Application Support/Vivaldi/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json
echo "Removing $HOME/Library/Application Support/Vivaldi/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json..."
if [ -d "$HOME/Library/Application Support/Vivaldi/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -rf "$HOME/Library/Application Support/Vivaldi/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
elif [ -f "$HOME/Library/Application Support/Vivaldi/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" ]; then
    rm -f "$HOME/Library/Application Support/Vivaldi/NativeMessagingHosts/com.choosyosx.choosy.nativemessaging.json" 2>/dev/null || true
fi

# Remove $HOME/Library/Caches/com.apple.helpd/Generated/com.choosyosx.Choosy.help*
echo "Removing $HOME/Library/Caches/com.apple.helpd/Generated/com.choosyosx.Choosy.help*..."
if [ -d "$HOME/Library/Caches/com.apple.helpd/Generated/com.choosyosx.Choosy.help*" ]; then
    rm -rf "$HOME/Library/Caches/com.apple.helpd/Generated/com.choosyosx.Choosy.help*" 2>/dev/null || true
elif [ -f "$HOME/Library/Caches/com.apple.helpd/Generated/com.choosyosx.Choosy.help*" ]; then
    rm -f "$HOME/Library/Caches/com.apple.helpd/Generated/com.choosyosx.Choosy.help*" 2>/dev/null || true
fi

# Remove $HOME/Library/Caches/com.choosyosx.Choosy
echo "Removing $HOME/Library/Caches/com.choosyosx.Choosy..."
if [ -d "$HOME/Library/Caches/com.choosyosx.Choosy" ]; then
    rm -rf "$HOME/Library/Caches/com.choosyosx.Choosy" 2>/dev/null || true
elif [ -f "$HOME/Library/Caches/com.choosyosx.Choosy" ]; then
    rm -f "$HOME/Library/Caches/com.choosyosx.Choosy" 2>/dev/null || true
fi

# Remove $HOME/Library/Containers/com.choosyosx.Choosy.Safari
echo "Removing $HOME/Library/Containers/com.choosyosx.Choosy.Safari..."
if [ -d "$HOME/Library/Containers/com.choosyosx.Choosy.Safari" ]; then
    rm -rf "$HOME/Library/Containers/com.choosyosx.Choosy.Safari" 2>/dev/null || true
elif [ -f "$HOME/Library/Containers/com.choosyosx.Choosy.Safari" ]; then
    rm -f "$HOME/Library/Containers/com.choosyosx.Choosy.Safari" 2>/dev/null || true
fi

# Remove $HOME/Library/Containers/com.choosyosx.Choosy.Share
echo "Removing $HOME/Library/Containers/com.choosyosx.Choosy.Share..."
if [ -d "$HOME/Library/Containers/com.choosyosx.Choosy.Share" ]; then
    rm -rf "$HOME/Library/Containers/com.choosyosx.Choosy.Share" 2>/dev/null || true
elif [ -f "$HOME/Library/Containers/com.choosyosx.Choosy.Share" ]; then
    rm -f "$HOME/Library/Containers/com.choosyosx.Choosy.Share" 2>/dev/null || true
fi

# Remove $HOME/Library/Group Containers/*.com.choosyosx.Choosy
echo "Removing $HOME/Library/Group Containers/*.com.choosyosx.Choosy..."
if [ -d "$HOME/Library/Group Containers/*.com.choosyosx.Choosy" ]; then
    rm -rf "$HOME/Library/Group Containers/*.com.choosyosx.Choosy" 2>/dev/null || true
elif [ -f "$HOME/Library/Group Containers/*.com.choosyosx.Choosy" ]; then
    rm -f "$HOME/Library/Group Containers/*.com.choosyosx.Choosy" 2>/dev/null || true
fi

# Remove $HOME/Library/HTTPStorages/com.choosyosx.Choosy
echo "Removing $HOME/Library/HTTPStorages/com.choosyosx.Choosy..."
if [ -d "$HOME/Library/HTTPStorages/com.choosyosx.Choosy" ]; then
    rm -rf "$HOME/Library/HTTPStorages/com.choosyosx.Choosy" 2>/dev/null || true
elif [ -f "$HOME/Library/HTTPStorages/com.choosyosx.Choosy" ]; then
    rm -f "$HOME/Library/HTTPStorages/com.choosyosx.Choosy" 2>/dev/null || true
fi

# Remove $HOME/Library/Preferences/com.choosyosx.ChoosyPrefPane.plist
echo "Removing $HOME/Library/Preferences/com.choosyosx.ChoosyPrefPane.plist..."
if [ -d "$HOME/Library/Preferences/com.choosyosx.ChoosyPrefPane.plist" ]; then
    rm -rf "$HOME/Library/Preferences/com.choosyosx.ChoosyPrefPane.plist" 2>/dev/null || true
elif [ -f "$HOME/Library/Preferences/com.choosyosx.ChoosyPrefPane.plist" ]; then
    rm -f "$HOME/Library/Preferences/com.choosyosx.ChoosyPrefPane.plist" 2>/dev/null || true
fi

echo "Uninstallation complete!"
exit 0
